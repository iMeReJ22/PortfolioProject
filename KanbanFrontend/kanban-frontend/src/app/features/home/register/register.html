<div class="auth-container">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="auth-card">
        <h2>Register:</h2>

        <div class="form-group">
            <label>Username:</label>
            <input
                formControlName="username"
                type="text"
                placeholder="User001"
                [class.is-invalid]="f.username.touched && f.username.errors"
            />
            @if (f.username.touched && f.username.errors?.['required']) {
                <span class="error-msg">Invalid or missing username.</span>
            }
        </div>

        <div class="form-group">
            <label> Email: </label>
            <input
                formControlName="email"
                type="email"
                placeholder="email@email.com"
                [class.is-invalid]="f.email.touched && f.email.errors"
            />
            @if (f.email.touched && f.email.errors) {
                @if (f.email.errors['required']) {
                    <span class="error-msg">Email is required.</span>
                } @else if (f.email.errors['email']) {
                    <span class="error-msg">Email is invalid.</span>
                }
            }
        </div>

        <div class="form-group">
            <label>Password:</label>
            <input
                formControlName="password"
                type="password"
                placeholder="********"
                [class.is-invalid]="f.password.touched && f.password.errors"
            />
            @if (f.password.touched && f.password.errors) {
                @if (f.password.errors['required']) {
                    <span class="error-msg">Password is required.</span>
                } @else if (f.password.errors['minlength']) {
                    <span class="error-msg">Minimal password length is 8 characters.</span>
                }
            }
        </div>

        <div class="form-group">
            <label>Confirm Password:</label>
            <input
                formControlName="password2"
                type="password"
                placeholder="********"
                [class.is-invalid]="f.password2.touched && f.password2.errors"
            />
            @if (f.password2.touched && (f.password2.errors || registerForm.errors)) {
                @if (f.password2.errors?.['required']) {
                    <span class="error-msg">Confirm password is required.</span>
                } @else if (registerForm.hasError('passwordMismatch')) {
                    <span class="error-msg">Passwords do not match.</span>
                }
            }
        </div>

        <button type="submit" [disabled]="registerForm.invalid || status() === 'loading'">
            {{ status() === 'loading' ? 'Registering' : 'Register' }}
        </button>

        <p>Already registered? <a routerLink="/login">Login</a></p>
    </form>
</div>
